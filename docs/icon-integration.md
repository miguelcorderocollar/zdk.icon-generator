# Icon Asset Integration

This document describes the icon asset integration system implemented in Phase 2 of the development plan.

## Overview

The icon integration system ingests icons from multiple icon packs, normalizes their metadata, and generates a unified catalog that can be used by the application.

## Icon Packs

Currently supported icon packs:

- **Zendesk Garden** (`@zendeskgarden/svg-icons`) - Apache-2.0 licensed
- **Feather Icons** (`feather-icons`) - MIT licensed

## Architecture

### Type Definitions

Icon metadata is defined in `src/types/icon.ts`:

- `IconMetadata` - Normalized icon data structure
- `IconCatalog` - Complete catalog structure with metadata and licenses
- `IconPack` - Supported icon pack types

### Adapters

Each icon pack has a dedicated adapter in `src/adapters/`:

- `zendesk-garden.ts` - Processes Zendesk Garden icons (12px and 16px variants)
- `feather.ts` - Processes Feather icons (24px)

Adapters are responsible for:
- Reading SVG files from `node_modules`
- Normalizing SVG content
- Extracting metadata (name, keywords, size, variant)
- Generating unique IDs

### Catalog Generation

The catalog is generated by running:

```bash
npm run generate-icons
```

This script:
1. Ingests icons from all configured packs
2. Normalizes metadata
3. Generates a unified JSON catalog at `public/icon-catalog.json`

## Catalog Structure

The generated catalog has the following structure:

```json
{
  "meta": {
    "version": "1.0.0",
    "generatedAt": "2025-11-09T15:27:21.459Z",
    "totalIcons": 1195
  },
  "licenses": {
    "zendesk-garden": { ... },
    "feather": { ... }
  },
  "icons": {
    "zendesk-garden-123-fill-12": { ... },
    "feather-activity": { ... }
  },
  "byPack": {
    "zendesk-garden": ["zendesk-garden-123-fill-12", ...],
    "feather": ["feather-activity", ...]
  }
}
```

## Usage

### Loading the Catalog

```typescript
import { loadIconCatalog, getAllIcons, searchIcons } from '@/utils/icon-catalog';

// Load the entire catalog
const catalog = await loadIconCatalog();

// Get all icons
const allIcons = await getAllIcons();

// Search icons
const results = await searchIcons('alert');
```

### Icon Metadata

Each icon includes:
- `id` - Unique identifier
- `name` - Human-readable name
- `pack` - Source icon pack
- `variant` - Variant type (e.g., "fill", "stroke")
- `svg` - Normalized SVG content
- `keywords` - Searchable keywords
- `size` - Icon size in pixels (if applicable)

## Adding New Icon Packs

To add a new icon pack:

1. Install the package: `npm install <package-name>`
2. Create an adapter in `src/adapters/<pack-name>.ts`
3. Export `LICENSE` and an `ingest*` function
4. Import and call the ingest function in `scripts/generate-icon-catalog.ts`
5. Add the pack type to `IconPack` in `src/types/icon.ts`

## License Compliance

All icon packs must have permissive licenses compatible with redistribution:
- Apache-2.0
- MIT
- CC0 / CC BY (with attribution)

License information is included in the catalog and should be displayed in the UI.

## Development

### Regenerating the Catalog

After installing or updating icon pack dependencies:

```bash
npm run generate-icons
```

The catalog is generated at build time and served as a static asset. For development, you may need to regenerate it when dependencies change.

### Cache Management

The catalog is cached in memory after first load. To clear the cache (useful for development):

```typescript
import { clearCatalogCache } from '@/utils/icon-catalog';
clearCatalogCache();
```

## Future Enhancements

- Support for additional icon packs
- Icon pack versioning
- Incremental catalog updates
- Icon preview generation
- Metadata enrichment (tags, categories)

